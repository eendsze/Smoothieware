<html>
<head>
	<meta charset="utf-8">
	<title>Marógép</title>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.js"></script>
   <script type="text/javascript" src="functions.js"></script>
</head>

<body onload="refreshFiles();">

<h1>Marógép fájlkezelő</h1>

<br/>
<button id="pause" onclick="runCommand('suspend', false);">Megállít</button>
<button id="resume" onclick="runCommand('resume', false);">Tovább</button>


<h2> Fájl feltöltés </h2>
<input type="file" id="files" name="files[]" onchange="upload();">

<h3>Fájl(ok) feltöltése</h3>
<output id="list"></output>
<div id="progress"></div>
<div id="uploadresult"></div>
<script>
  document.getElementById('files').addEventListener('change', handleFileSelect, false);
</script>

<h2> Munkafájlok listája <button id="refreshFiles" onclick="refreshFiles();">Frissít</button> </h2>

<table id="fileList">
</table>

<br/>

<h2>Parancs küldés (haladóknak)</h2>
<form action="/command" id="commandForm">
		<input type="text" name="commandText" placeholder="Send Command...">
		<input type="submit" value="Send">
</form>
<!-- the result of the command will be rendered inside this div -->
<div id="result"></div>
<script>
	// Attach a submit handler to the form
	$( "#commandForm" ).submit(function( event ) {
		// Stop form from submitting normally
		event.preventDefault();
		// Get some values from elements on the page:
		var $form = $( this );
		command = $form.find( "input[name='commandText']" ).val();
		command += "\n";
		url = $form.attr( "action" );
		// Send the data using post
		var posting = $.post( url, command );
		// Put the results in a div
		posting.done(function( data ) {
			$( "#result" ).empty();
              $.each(data.split('\n'), function(index) {
                  $( "#result" ).append( this + '<br/>' );
              });
		});
	});
</script>

</body>
</html>
